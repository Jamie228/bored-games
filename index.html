<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A website to search and select board games from a collection.">
    <meta name="author" content="Jamie Hamilton">

    <!-- FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Grenze+Gotisch:wght@900&family=Bungee+Shade&family=Chelsea+Market&family=Roboto+Slab:wght@400;900&display=swap" rel="stylesheet">
    <!-- FONTAWESOME -->
    <script src="https://kit.fontawesome.com/9477a9faa7.js" crossorigin="anonymous"></script>
    <!-- CSS -->
    <link rel="stylesheet" href="css/main.css">
    <!-- JS -->

    <title>Bored? Games!</title>
</head>
<body>
    <header class="hero">
        <h1>&#9823;&#65039;<br />Bored? Games!</h1>
    </header>
    <main>
        <div id="result"></div>
        <div class="random-button-wrap">
            <button class="random-button" id="random-button"><b><i class="fas fa-random"></i>&nbsp;&nbsp;&nbsp;&nbsp;Pick a Game!</b></button>
        </div>
    </main>

    <script src="js/sql-wasm.js" type="text/javascript"></script>
    <script src="js/main.js" type="text/javascript"></script>

    <script type="text/javascript">
        getDatabase('games.db');

        function randomQuery() {
            try {
                var stmt = database.exec('SELECT * FROM games ORDER BY RANDOM() LIMIT 1');
                return stmt;
            } catch (err) {
                return false;
            }
        }

        var random_button = document.getElementById('random-button');
        random_button.addEventListener('click', function() {
            var result = randomQuery();
            if (result !== false) {
                var results = document.getElementById('result');
                console.log(result[0].values);
                results.innerHTML = result[0].values[0][1];
                results.style.maxHeight = '500px';
                results.className = "expanded";
                window.location.hash = 'result';
            }
        });
    </script>
</body>
</html>